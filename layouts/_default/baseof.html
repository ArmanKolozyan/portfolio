<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}" class="m-auto {{ .Site.Params.theme.mainTheme }}">
  {{- partial "head.html" . -}}
  <body class="h-screen p-2 m-auto max-w-4xl flex flex-col">
    {{ if not .Site.Params.theme.singlePage }}
    {{ partial "header" . }}
    {{ end }}
    <main class="grow">
      {{- block "main" . }}
      {{- end }}
    </main>
    
    <!-- scroll to top button -->
    <button id="scrollToTop" class="fixed bottom-6 right-6 bg-blue-500 dark:bg-yellow-600 hover:bg-blue-600 dark:hover:bg-yellow-700 text-white p-3 rounded-full shadow-lg transition-all duration-300 opacity-0 invisible transform translate-y-2 z-50">
      <i class="fas fa-chevron-up text-lg"></i>
    </button>
    
    <script>
      // all external links in new tab
      document.addEventListener('DOMContentLoaded', function() {
        const links = document.querySelectorAll('a[href^="http"]');
        links.forEach(function(link) {
          if (!link.href.includes(window.location.hostname)) {
            link.target = '_blank';
            link.rel = 'noopener noreferrer';
          }
        });
        
        // scroll to top functionality
        const scrollToTopBtn = document.getElementById('scrollToTop');
        
        // showing/hiding button based on scroll position
        window.addEventListener('scroll', function() {
          if (window.scrollY > 300) {
            scrollToTopBtn.classList.remove('opacity-0', 'invisible', 'translate-y-2');
            scrollToTopBtn.classList.add('opacity-100', 'visible', 'translate-y-0');
          } else {
            scrollToTopBtn.classList.add('opacity-0', 'invisible', 'translate-y-2');
            scrollToTopBtn.classList.remove('opacity-100', 'visible', 'translate-y-0');
          }
        });
        
        // smooth scroll to top when clicked
        scrollToTopBtn.addEventListener('click', function() {
          window.scrollTo({
            top: 0,
            behavior: 'smooth'
          });
        });
      });
    </script>
  </body>
</html>
